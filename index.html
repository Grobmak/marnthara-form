<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Marnthara Input (v3)</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="header">
        <div class="menu-container">
            <button class="btn btn-icon" id="menuBtn">‚ò∞</button>
            <div class="menu-dropdown" id="menuDropdown">
                <button type="button" class="btn btn-block" id="importBtn">Import(JSON)</button>
                <button type="button" class="btn btn-block" id="exportBtn">Export(JSON)</button>
            </div>
        </div>
        <h1>Marnthara</h1>
        <button type="button" class="btn btn-xs btn-primary outline" id="addRoomHeaderBtn">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
        <span style="flex:1;"></span>
        <button type="button" class="btn btn-xs btn-primary" id="lockBtn"><span class="lock-text">‡∏•‡πá‡∏≠‡∏Ñ</span> <span class="lock-icon">üîí</span></button>
        <button type="button" class="btn btn-xs btn-danger" id="clearAllBtn">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <form id="orderForm" method="post" target="hiddenFrame">
        <div class="card" id="customerInfo">
            <div class="row">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                <input class="field" name="customer_name" type="text" />
            </div>
            <div class="row">
                <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                <input class="field" name="customer_address" type="text" />
            </div>
            <div class="row">
                <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
                <input class="field" name="customer_phone" type="text" />
            </div>
        </div>
        
        <div id="rooms" class="rooms-container"></div>
        
        <div class="footer">
            <div class="total-summary">
                <p>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î‡∏£‡∏ß‡∏°: <b class="price" id="setCount">0</b> ‡∏à‡∏∏‡∏î (‡∏°‡πà‡∏≤‡∏ô: <b class="price" id="setCountSets">0</b> | ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á+‡∏ß‡∏≠‡∏•: <b class="price" id="setCountDeco">0</b>)</p>
                <p>‡∏ú‡πâ‡∏≤‡∏ó‡∏∂‡∏ö‡∏£‡∏ß‡∏°: <b class="price" id="grandFabric">0.00</b></p>
                <p>‡∏ú‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°: <b class="price" id="grandSheerFabric">0.00</b></p>
                <p>‡∏£‡∏≤‡∏á‡∏ó‡∏∂‡∏ö‡∏£‡∏ß‡∏°: <b class="price" id="grandOpaqueTrack">0.00</b></p>
                <p>‡∏£‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡∏£‡∏ß‡∏°: <b class="price" id="grandSheerTrack">0.00</b></p>
                <h3>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: <b class="price" id="grandTotal">0</b> ‡∏ö.</h3>
            </div>
            <div class="footer-actions">
                <button type="button" class="btn btn-primary" id="copyTextBtn">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
                <button type="submit" class="btn btn-success">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
        </div>
        <input id="payload" type="hidden" name="payload" />
    </form>
    
    <iframe name="hiddenFrame" style="display:none;"></iframe>

    <div id="confirmationModal" class="modal-backdrop">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <p id="modalBody"></p>
            <div class="modal-actions">
                <button class="btn btn-danger" id="modalCancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-success" id="modalConfirm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </div>
    </div>
    
    <div id="copyOptionsModal" class="modal-backdrop">
        <div class="modal-content">
            <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</h3>
            <div class="form-check">
                <input type="checkbox" id="copyCustomerInfo" class="form-check-input" checked>
                <label for="copyCustomerInfo" class="form-check-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="copyRoomDetails" class="form-check-input" checked>
                <label for="copyRoomDetails" class="form-check-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á</label>
            </div>
            <div class="form-check">
                <input type="checkbox" id="copySummary" class="form-check-input" checked>
                <label for="copySummary" class="form-check-label">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</label>
            </div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="copyOptionsCancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-success" id="copyOptionsConfirm">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
            </div>
        </div>
    </div>

    <div id="importModal" class="modal-backdrop">
        <div class="modal-content">
            <h3>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (JSON)</h3>
            <textarea id="importJsonArea" rows="10" placeholder="‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
            <div class="modal-actions">
                <button class="btn btn-danger" id="importCancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-success" id="importConfirm">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤</button>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>
    
    <template id="roomTpl">
        <div class="card room" data-room data-suspended="false">
            <div class="room-head">
                <input class="field room-name" name="room_name" type="text" placeholder="‡∏´‡πâ‡∏≠‡∏á" />
                <button type="button" class="btn btn-icon btn-warning" data-act="toggle-room-suspend" title="‡∏£‡∏∞‡∏á‡∏±‡∏ö"><span data-suspend-text>‡∏£‡∏∞‡∏á‡∏±‡∏ö</span> ‚è∏</button>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-room" title="‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á">‚úï</button>
            </div>
            <div class="row">
                <div><label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤‡∏ó‡∏∂‡∏ö (‡∏ö./‡∏°.)</label><select class="field" name="room_price_per_m" required></select></div>
                <div><label>‡∏™‡πÑ‡∏ï‡∏•‡πå</label><select class="field" name="room_style" required><option value="‡∏•‡∏≠‡∏ô">‡∏•‡∏≠‡∏ô</option><option value="‡∏ï‡∏≤‡πÑ‡∏Å‡πà">‡∏ï‡∏≤‡πÑ‡∏Å‡πà</option><option value="‡∏à‡∏µ‡∏ö">‡∏à‡∏µ‡∏ö</option></select></div>
            </div>
            <div class="brief" data-room-brief></div>
            <div class="section">
                <p class="section-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô</p>
                <div data-sets></div>
                <button type="button" class="btn btn-primary" data-act="add-set" style="margin-top: 8px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∏‡∏î‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô</button>
            </div>
            <div class="section">
                <p class="section-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á</p>
                <div data-decorations></div>
                <button type="button" class="btn btn-primary" data-act="add-deco" style="margin-top: 8px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á</button>
            </div>
            <div class="section">
                <p class="section-title">‡∏ß‡∏≠‡∏•‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå</p>
                <div data-wallpapers></div>
                <button type="button" class="btn btn-info" data-act="add-wallpaper" style="margin-top: 8px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏≠‡∏•‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå</button>
            </div>
        </div>
    </template>

    <template id="setTpl">
        <div class="card card-item set" data-set data-suspended="false">
            <div class="item-head">
                <span class="item-title" data-item-title></span>
                <button type="button" class="btn btn-icon btn-warning" data-act="toggle-suspend" title="‡∏£‡∏∞‡∏á‡∏±‡∏ö"><span data-suspend-text>‡∏£‡∏∞‡∏á‡∏±‡∏ö</span> ‚è∏</button>
                <button type="button" class="btn btn-icon btn-clear" data-act="clear-set" title="‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">‚ü≥</button>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-set" title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">‚úï</button>
            </div>
            <div class="row" data-set-options-row>
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏°.)</label><input class="field" name="width_m" type="number" step="0.01" min="0" required /></div>
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏°.)</label><input class="field" name="height_m" type="number" step="0.01" min="0" required /></div>
                <div>
                    <label>‡∏ä‡∏ô‡∏¥‡∏î‡∏ú‡πâ‡∏≤</label>
                    <select class="field" name="fabric_variant" required>
                        <option value="‡∏ó‡∏∂‡∏ö">‡∏ó‡∏∂‡∏ö</option>
                        <option value="‡πÇ‡∏õ‡∏£‡πà‡∏á">‡πÇ‡∏õ‡∏£‡πà‡∏á</option>
                        <option value="‡∏ó‡∏∂‡∏ö&‡πÇ‡∏õ‡∏£‡πà‡∏á">‡∏ó‡∏∂‡∏ö & ‡πÇ‡∏õ‡∏£‡πà‡∏á</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="sheer-wrap hidden" data-sheer-wrap>
                    <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πà‡∏á (‡∏ö./‡∏°.)</label>
                    <select class="field" name="sheer_price_per_m"></select>
                </div>
                <div><label>‡∏ä‡∏ô‡∏¥‡∏î‡πÄ‡∏õ‡∏¥‡∏î</label><select class="field" name="open_type"><option value=""></option><option value="‡∏Ç‡πâ‡∏≤‡∏á">‡∏Ç‡πâ‡∏≤‡∏á</option><option value="‡∏Å‡∏•‡∏≤‡∏á">‡∏Å‡∏•‡∏≤‡∏á</option></select></div>
            </div>
            <div class="summary">
                <span data-opaque-price-label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤‡∏ó‡∏∂‡∏ö: <span class="price" data-set-price-opaque>0</span> ‡∏ö.</span> ‚Ä¢ 
                <span data-sheer-price-label class="hidden">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πà‡∏á: <span class="price" data-set-price-sheer>0</span> ‡∏ö.</span> ‚Ä¢ 
                ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏£‡∏ß‡∏°: <span class="price" data-set-price-total>0</span> ‡∏ö.
            </div>
            <div class="summary">
                <span data-opaque-yardage-label>‡∏ú‡πâ‡∏≤‡∏ó‡∏∂‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: <span class="price" data-set-yardage-opaque>0.00</span> ‡∏´‡∏•‡∏≤</span> ‚Ä¢
                <span data-sheer-yardage-label class="hidden">‡∏ú‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: <span class="price" data-set-yardage-sheer>0.00</span> ‡∏´‡∏•‡∏≤</span>
            </div>
            <div class="summary">
                <span data-opaque-track-label>‡∏£‡∏≤‡∏á‡∏ó‡∏∂‡∏ö: <span class="price" data-set-opaque-track>0.00</span> ‡∏°.</span> ‚Ä¢
                <span data-sheer-track-label class="hidden">‡∏£‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á: <span class="price" data-set-sheer-track>0.00</span> ‡∏°.</span>
            </div>
        </div>
    </template>

    <template id="decoTpl">
        <div class="card card-item deco-item" data-deco-item data-suspended="false">
            <div class="item-head">
                <span class="item-title" data-item-title></span>
                <button type="button" class="btn btn-icon btn-warning" data-act="toggle-suspend" title="‡∏£‡∏∞‡∏á‡∏±‡∏ö"><span data-suspend-text>‡∏£‡∏∞‡∏á‡∏±‡∏ö</span> ‚è∏</button>
                <button type="button" class="btn btn-icon btn-clear" data-act="clear-deco" title="‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">‚ü≥</button>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-deco" title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">‚úï</button>
            </div>
            <div class="row">
                <div><label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label><input class="field" name="deco_type" type="text" required /></div>
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏°.)</label><input class="field" name="deco_width_m" type="number" step="0.01" min="0" required /></div>
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏°.)</label><input class="field" name="deco_height_m" type="number" step="0.01" min="0" required /></div>
                <div><label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠ ‡∏ï‡∏£.‡∏´‡∏•‡∏≤</label><input class="field" name="deco_price_sqyd" type="text" inputmode="numeric" required /></div>
            </div>
            <div class="summary" style="margin-top: 12px;" data-deco-summary>
                ‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="price">0</span> ‡∏ö. ‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: <span class="price">0.00</span> ‡∏ï‡∏£.‡∏´‡∏•‡∏≤
            </div>
        </div>
    </template>

    <template id="wallpaperTpl">
        <div class="card card-item wallpaper-item" data-wallpaper-item data-suspended="false">
            <div class="item-head">
                <span class="item-title" data-item-title></span>
                <button type="button" class="btn btn-icon btn-warning" data-act="toggle-suspend" title="‡∏£‡∏∞‡∏á‡∏±‡∏ö"><span data-suspend-text>‡∏£‡∏∞‡∏á‡∏±‡∏ö</span> ‚è∏</button>
                <button type="button" class="btn btn-icon btn-clear" data-act="clear-wallpaper" title="‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">‚ü≥</button>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-wallpaper" title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">‚úï</button>
            </div>
            <div class="row">
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏´‡πâ‡∏≠‡∏á (‡∏°.)</label><input class="field" name="wallpaper_height_m" type="number" step="0.01" min="0" required /></div>
                <div><label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏°‡πâ‡∏ß‡∏ô</label><input class="field" name="wallpaper_price_roll" type="text" inputmode="numeric" required /></div>
            </div>
            <div class="walls-section">
                <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ú‡∏ô‡∏±‡∏á (‡πÉ‡∏™‡πà‡∏ó‡∏µ‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô)</label>
                <div data-walls-container></div>
                <button type="button" class="btn btn-xs" data-act="add-wall" style="margin-top: 8px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏ô‡∏±‡∏á</button>
            </div>
            <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-wallpaper-summary>
                ‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="price">0</span> ‡∏ö. ‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: <span class="price">0.00</span> ‡∏ï‡∏£.‡∏°. ‚Ä¢ ‡πÉ‡∏ä‡πâ <span class="price">0</span> ‡∏°‡πâ‡∏ß‡∏ô
            </div>
        </div>
    </template>

    <template id="wallTpl">
        <div class="wall-input-row">
            <input class="field" name="wall_width_m" type="number" step="0.01" min="0" />
            <button type="button" class="btn btn-icon btn-danger" data-act="del-wall" title="‡∏•‡∏ö‡∏ú‡∏ô‡∏±‡∏á">‚úï</button>
        </div>
    </template>
    <script src="script.js"></script>
</body>
</html>