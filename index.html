<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Marnthara Input (v3)</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="header">
        <div class="menu-container">
            <button class="btn btn-icon" id="menuBtn">‚ò∞</button>
            <div class="menu-dropdown" id="menuDropdown">
                <button type="button" class="btn btn-block" id="importBtn">Import(JSON)</button>
                <button type="button" class="btn btn-block" id="exportBtn">Export(JSON)</button>
            </div>
        </div>
        <h1>Marnthara</h1>
        <button type="button" class="btn btn-xs btn-primary outline" id="addRoomHeaderBtn">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
        <span style="flex:1;"></span>
        <button type="button" class="btn btn-xs btn-primary" id="lockBtn"><span class="lock-text">‡∏•‡πá‡∏≠‡∏Ñ</span> <span class="lock-icon">üîí</span></button>
        <button type="button" class="btn btn-xs btn-danger" id="clearAllBtn">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <form id="orderForm" method="post" target="hiddenFrame">
        <div class="card" id="customer-card">
            <div class="card-head">
                <label class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
            </div>
            <div class="card-body">
                <div><label>‡∏ä‡∏∑‡πà‡∏≠</label><input class="field" name="customer_name" type="text" required /></div>
                <div><label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label><input class="field" name="customer_address" type="text" /></div>
                <div><label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input class="field" name="customer_phone" type="text" inputmode="tel" required /></div>
            </div>
        </div>

        <div class="rooms-container" id="roomsContainer"></div>

        <div class="card summary-card">
            <div class="card-head">
                <label class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
            </div>
            <div class="card-body">
                <div class="row">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô:</span>
                    <div class="price" id="totalFabricPrice">0</div>
                    <span>‡∏ö.</span>
                </div>
                <div class="row">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ß‡∏≠‡∏•‡∏•‡πå‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå:</span>
                    <div class="price" id="totalWallpaperPrice">0</div>
                    <span>‡∏ö.</span>
                </div>
                <div class="row">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏°‡∏±‡∏î‡∏à‡∏≥:</span>
                    <input class="field price-field" type="text" inputmode="numeric" id="deposit" value="0" />
                    <span>‡∏ö.</span>
                </div>
                <div class="row total">
                    <span>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                    <div class="price" id="balance">0</div>
                    <span>‡∏ö.</span>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button type="submit" class="btn btn-success btn-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            <div class="copy-options">
                <button type="button" class="btn btn-xs btn-info" id="copyToClipboardBtn">Copy</button>
                <div class="modal-dialog hidden" id="copyOptionsModal">
                    <h4>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</h4>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="copyAllCheckbox" checked>
                        <label class="form-check-label" for="copyAllCheckbox">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="copyDetailsCheckbox" checked>
                        <label class="form-check-label" for="copyDetailsCheckbox">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="copySummaryCheckbox" checked>
                        <label class="form-check-label" for="copySummaryCheckbox">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</label>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-primary" id="confirmCopyBtn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
                        <button type="button" class="btn btn-secondary" id="cancelCopyBtn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    </div>
                </div>
            </div>
        </div>
        
        <input type="hidden" name="payload" id="payloadInput" />
        <input type="hidden" name="app_version" id="appVersionInput" />
    </form>
    
    <iframe name="hiddenFrame" style="display:none;"></iframe>
    <div id="toast" class="toast"></div>

    <template id="roomTpl">
        <div class="card room-card" data-room-id="">
            <div class="card-head">
                <label class="card-title">‡∏´‡πâ‡∏≠‡∏á: <span class="room-name"></span></label>
                <div style="flex:1;"></div>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-room" title="‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á">‚úï</button>
                <button type="button" class="btn btn-icon btn-primary copy-room-btn" data-act="copy-room" title="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á">üìÑ</button>
            </div>
            <div class="card-body">
                <div class="name-section">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á</label>
                    <input class="field" name="room_name" type="text" required />
                </div>

                <div class="curtains-section">
                    <div class="curtain-group-header">
                        <label>‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô</label>
                        <button type="button" class="btn btn-xs btn-primary" data-act="add-curtain">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                    </div>
                    <div data-curtains-container></div>
                </div>

                <div class="wallpaper-section">
                    <div class="wallpaper-group-header">
                        <label>‡∏ß‡∏≠‡∏•‡∏•‡πå‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå</label>
                        <button type="button" class="btn btn-xs btn-info" data-act="add-wallpaper">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                    </div>
                    <div data-wallpapers-container></div>
                </div>

                <div class="note-section">
                    <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                    <textarea class="field" name="room_note" rows="2"></textarea>
                </div>
            </div>
            <div class="card-footer small">
                <div class="room-summary" data-room-summary>
                    <div class="room-summary-item">‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô: <span class="price">0</span> ‡∏ö.</div>
                    <div class="room-summary-item">‡∏ß‡∏≠‡∏•‡∏•‡πå‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå: <span class="price">0</span> ‡∏ö.</div>
                    <div class="room-summary-item">‡∏£‡∏ß‡∏°: <span class="price">0</span> ‡∏ö.</div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="curtainTpl">
        <div class="curtain-row" data-curtain-id="">
            <div class="curtain-head">
                <input class="field" name="curtain_name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô" required />
                <div style="flex:1;"></div>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-curtain" title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">‚úï</button>
            </div>
            <div class="row">
                <div>
                    <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏°.)</label>
                    <input class="field" name="curtain_width_m" type="number" step="0.01" min="0" required />
                </div>
                <div>
                    <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏°.)</label>
                    <input class="field" name="curtain_height_m" type="number" step="0.01" min="0" required />
                </div>
                <div>
                    <label>‡∏ä‡∏ô‡∏¥‡∏î</label>
                    <select class="field" name="curtain_type" required>
                        <option value="fabric">‡∏ó‡∏∂‡∏ö</option>
                        <option value="sheer">‡πÇ‡∏õ‡∏£‡πà‡∏á</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div>
                    <label>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</label>
                    <select class="field" name="curtain_style" required>
                        <option value="‡∏•‡∏≠‡∏ô">‡∏•‡∏≠‡∏ô</option>
                        <option value="‡∏ï‡∏≤‡πÑ‡∏Å‡πà">‡∏ï‡∏≤‡πÑ‡∏Å‡πà</option>
                        <option value="‡∏à‡∏µ‡∏ö">‡∏à‡∏µ‡∏ö</option>
                    </select>
                </div>
                <div>
                    <label>‡πÄ‡∏Å‡∏£‡∏î‡∏ú‡πâ‡∏≤</label>
                    <input class="field" name="curtain_grade" type="number" min="1" max="15" inputmode="numeric" required />
                </div>
                <div>
                    <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏ö.)</label>
                    <input class="field" name="curtain_special_price" type="text" inputmode="numeric" value="0" />
                </div>
            </div>
            <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-curtain-summary>
                ‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="price">0</span> ‡∏ö. ‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: <span class="price">0.00</span> ‡∏ï‡∏£.‡∏°. ‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏ú‡πâ‡∏≤: <span class="price">0.00</span> ‡∏°.
            </div>
        </div>
    </template>
    
    <template id="wallpaperTpl">
        <div class="wallpaper-row" data-wallpaper-id="">
            <div class="wallpaper-head">
                <input class="field" name="wallpaper_name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏≠‡∏•‡∏•‡πå‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå" required />
                <div style="flex:1;"></div>
                <button type="button" class="btn btn-icon btn-danger" data-act="del-wallpaper" title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">‚úï</button>
            </div>
            <div class="row">
                <div><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏´‡πâ‡∏≠‡∏á (‡∏°.)</label><input class="field" name="wallpaper_height_m" type="number" step="0.01" min="0" required /></div>
                <div><label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏°‡πâ‡∏ß‡∏ô</label><input class="field" name="wallpaper_price_roll" type="text" inputmode="numeric" required /></div>
            </div>
            <div class="walls-section">
                <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ú‡∏ô‡∏±‡∏á (‡πÉ‡∏™‡πà‡∏ó‡∏µ‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô)</label>
                <div data-walls-container></div>
                <button type="button" class="btn btn-xs" data-act="add-wall" style="margin-top: 8px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏ô‡∏±‡∏á</button>
            </div>
            <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-wallpaper-summary>
                ‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="price">0</span> ‡∏ö. ‚Ä¢ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: <span class="price">0.00</span> ‡∏ï‡∏£.‡∏°. ‚Ä¢ ‡πÉ‡∏ä‡πâ <span class="price">0</span> ‡∏°‡πâ‡∏ß‡∏ô
            </div>
        </div>
    </template>

    <template id="wallTpl">
        <div class="wall-input-row">
            <input class="field" name="wall_width_m" type="number" step="0.01" min="0" required />
            <button type="button" class="btn btn-icon btn-danger" data-act="del-wall" title="‡∏•‡∏ö‡∏ú‡∏ô‡∏±‡∏á">‚úï</button>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>