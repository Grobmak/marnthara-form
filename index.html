<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Marnthara Order</title>
<style>
:root{--line:#2f2f33;--muted:#c9c9cf;--danger:#ff5a5f}
*{box-sizing:border-box} body{margin:0;padding:16px;color:#e6e6e6;
background:#121216;font-family:system-ui,Segoe UI,Roboto,Arial}
h1{font-size:18px;margin:0 0 12px}
.card{border:1px solid var(--line);border-radius:14px;padding:12px;margin:12px 0}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.field{width:100%;padding:.55rem .7rem;border:1px solid var(--line);
border-radius:.6rem;background:transparent;color:inherit}
label{font-size:12px;color:#b9b9bf;display:block;margin:8px 0 6px}
.btn{display:inline-flex;align-items:center;gap:.35rem;border:1px solid var(--line);
background:transparent;color:var(--muted);border-radius:.5rem;font-weight:500;
transition:opacity .15s ease;cursor:pointer}
.btn:hover{opacity:.85}
.btn-xs{padding:.2rem .45rem;font-size:.85rem;line-height:1.1}
.btn-icon{width:1.8rem;height:1.8rem;padding:0;display:inline-grid;place-items:center}
.btn-danger{border-color:var(--danger);color:var(--danger)}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
.room-header{display:flex;gap:8px;align-items:center;margin-bottom:8px}
.room-header .spacer{flex:1}
hr{border:none;border-top:1px solid var(--line);margin:12px 0}
.hidden{display:none}
</style>
</head>
<body>

<h1>สั่งงานม่าน</h1>

<!-- IMPORTANT: ใส่ Webhook URL ของ Make ตรง action -->
<form id="orderForm"
      action="https://hook.eu2.make.com/xul3fhuh96ybgfm2omdt2e74ejybxjoj"
      method="post" target="hiddenFrame">

  <div class="card" id="room-01">
    <div class="room-header">
      <strong>ห้อง 01</strong>
      <label for="room_name" style="margin:0">ชื่อห้อง</label>
      <input id="room_name" name="room_name" class="field" type="text"
             inputmode="text" placeholder="เช่น ห้องนอน 1" />
      <span class="spacer"></span>
      <button type="button" class="btn btn-icon btn-danger"
              data-action="del-room" data-target="#room-01"
              aria-label="ลบห้อง">✕</button>
    </div>

    <div class="row">
      <div>
        <label for="room_type">ประเภทห้อง</label>
        <select id="room_type" name="room_type" class="field" required>
          <option value="" hidden>เลือก</option>
          <option>นอน</option><option>โถง</option>
          <option>นั่งเล่น</option><option>ครัว</option>
        </select>
      </div>

      <div>
        <label for="open_type">รูปแบบเปิดผ้า</label>
        <select id="open_type" name="open_type" class="field" required>
          <option value="" hidden>เลือก</option>
          <option>แยกกลาง</option>
          <option>สไลด์เดี่ยว</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label for="style_type">สไตล์</label>
        <select id="style_type" name="style_type" class="field" required>
          <option value="" hidden>เลือก</option>
          <option>ลอน</option><option>ตาไก่</option><option>จีบ</option>
        </select>
      </div>

      <div>
        <label for="fabric_type">ชนิดผ้า</label>
        <select id="fabric_type" name="fabric_type" class="field" required>
          <option value="" hidden>เลือก</option>
          <option>ทึบ</option><option>โปร่ง</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label for="width_m">กว้าง (ม.)</label>
        <input id="width_m" name="width_m" class="field" type="number"
               step="0.01" inputmode="decimal" placeholder="เช่น 3.50" required />
      </div>
      <div>
        <label for="height_m">สูง (ม.)</label>
        <input id="height_m" name="height_m" class="field" type="number"
               step="0.01" inputmode="decimal" placeholder="เช่น 2.80" required />
      </div>
    </div>

    <label for="notes">หมายเหตุ</label>
    <textarea id="notes" name="notes" class="field" rows="2"
              placeholder="เช่น หน้าต่าง 2 บาน"></textarea>

    <div class="actions">
      <button type="button" class="btn btn-xs btn-danger"
              data-action="del-set" data-target="#room-01">ลบชุด</button>
    </div>
  </div>

  <hr />
  <div class="actions">
    <button type="submit" class="btn btn-xs">ส่งไปคำนวณ</button>
  </div>
</form>

<!-- กันหน้าเปลี่ยนตอน POST ไป Make -->
<iframe name="hiddenFrame" class="hidden"></iframe>

<script>
/* ลบ card ตามปุ่ม */
document.addEventListener('click', (e)=>{
  const b = e.target.closest('button[data-action]'); if(!b) return;
  const sel = b.dataset.target; const el = sel && document.querySelector(sel);
  if(!el) return;
  if(b.dataset.action==='del-room' || b.dataset.action==='del-set'){ el.remove(); }
});

/* เตือนถ้าไม่ได้ตั้ง Webhook URL */
(function(){
  const f=document.getElementById('orderForm');
  if(f.action.includes('PUT-YOUR-HOOK-HERE')){
    alert('ยังไม่ได้ตั้ง Webhook URL ของ Make ใน form.action');
  }
})();
</script>
</body>
</html>
