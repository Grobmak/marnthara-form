<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>โปรแกรมคำนวณ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <form id="orderForm" data-form>
            <div id="roomContainer" class="room-container"></div>
            <div class="action-buttons">
                <button type="button" class="btn btn-primary" id="addRoomBtn">เพิ่มห้อง</button>
                <button type="button" class="btn btn-danger" id="clearAllBtn">ล้างทั้งหมด</button>
                <button type="submit" class="btn btn-success" id="submitBtn">ส่งไปคำนวณ</button>
            </div>
            
            <div class="card mt-3" id="summaryCard" style="display: none;">
                <div class="card-header">
                    <h2>สรุปยอดรวม</h2>
                </div>
                <div class="card-body">
                    <div id="summaryGrid" class="summary-grid"></div>
                </div>
            </div>
        </form>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h3>ยืนยันการลบ</h3>
            <p>คุณแน่ใจหรือไม่ว่าต้องการลบรายการนี้?</p>
            <div class="modal-buttons">
                <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">ยกเลิก</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">ยืนยัน</button>
            </div>
        </div>
    </div>
    <div id="confirmSubmitModal" class="modal">
        <div class="modal-content">
            <h3>ยืนยันการส่งข้อมูล</h3>
            <p>คุณแน่ใจหรือไม่ว่าต้องการส่งข้อมูลนี้เพื่อคำนวณ?</p>
            <div class="modal-buttons">
                <button type="button" class="btn btn-secondary" id="cancelSubmitBtn">ยกเลิก</button>
                <button type="button" class="btn btn-success" id="confirmSubmitBtn">ยืนยัน</button>
            </div>
        </div>
    </div>

    <div id="toastContainer" class="toast-container"></div>

    <template id="room-template">
        <section class="card room-item" data-id>
            <div class="card-body">
                <div class="room-header">
                    <div class="form-group room-name-input">
                        <label>ห้อง</label>
                        <input type="text" class="form-control" data-bind="room.name" placeholder="เช่น ห้องรับแขก">
                    </div>
                    <div class="form-group room-style-select">
                        <label>รูปแบบ</label>
                        <select class="form-control" data-bind="room.style">
                            <option value="curtain">ผ้าม่าน</option>
                            <option value="sheer">ผ้าโปร่ง</option>
                            <option value="both">ทั้งคู่</option>
                        </select>
                    </div>
                    <div class="form-group room-price-select">
                        <label>ราคา</label>
                        <select class="form-control" data-bind="room.price">
                            <option value="0">เลือกราคา</option>
                        </select>
                    </div>
                    <p class="room-brief" data-room-brief>
                        ผ้าม่าน: <span>0</span> ตร.หลา • ราคา: <span class="price">0</span> บ.
                    </p>
                    <div class="item-actions room-actions">
                        <button type="button" class="btn btn-sm btn-clear" data-action="clear-room">ล้าง</button>
                        <button type="button" class="btn btn-sm btn-danger" data-action="delete-room">ลบห้อง</button>
                    </div>
                </div>
                <div class="room-details">
                    <div id="setContainer"></div>
                </div>
                <hr>
                <div class="room-summary">
                    <div class="summary-row">
                        <div class="summary-box">
                            <strong>ราคาผ้าม่านรวม:</strong> <span class="price" data-room-total>0</span> บ.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </template>
    <template id="set-template">
        <div class="set-item" data-id>
            <div class="item-header">
                <div class="form-group">
                    <label>ชุดที่</label>
                    <span class="item-title" data-bind="set.name">1</span>
                </div>
                <div class="item-actions">
                    <button type="button" class="btn btn-sm btn-clear" data-action="clear-set">ล้าง</button>
                    <button type="button" class="btn btn-sm btn-danger" data-action="delete-set">ลบ</button>
                </div>
            </div>
            <div class="item-body set-grid">
                <div class="form-group">
                    <label>กว้าง (ม.)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.width_m" inputmode="numeric" placeholder="เมตร">
                </div>
                <div class="form-group">
                    <label>สูง (ม.)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.height_m" inputmode="numeric" placeholder="เมตร">
                </div>
                <div class="form-group">
                    <label>จำนวน</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.quantity" inputmode="numeric" placeholder="จำนวน">
                </div>
                <div class="form-group">
                    <label>เพิ่ม (ซม.)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.extra_cm" inputmode="numeric" placeholder="ซม.">
                </div>
                <div class="form-group">
                    <label>พับ (เท่า)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.fold_times" inputmode="numeric" placeholder="เท่า">
                </div>
                <div class="form-group">
                    <label>ราคา (บ./หลา)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="set.price_yd" inputmode="numeric" placeholder="ราคา">
                </div>
            </div>
            <div class="summary-row set-summary-row">
                <div class="summary-box full-width" data-set-summary>
                    ราคา: <span class="price">0</span> บ. • พื้นที่: <span>0</span> ตร.หลา
                </div>
            </div>
            <div class="add-deco-btn mt-2 text-right">
                <button type="button" class="btn btn-sm btn-info" data-action="add-deco">เพิ่มของตกแต่ง</button>
            </div>
            <div class="deco-container mt-2"></div>
        </div>
    </template>
    <template id="deco-template">
        <div class="deco-item" data-id>
            <div class="item-header">
                <div class="form-group">
                    <label>ของตกแต่ง</label>
                    <span class="item-title" data-bind="deco.name">1</span>
                </div>
                <div class="item-actions">
                    <button type="button" class="btn btn-sm btn-danger" data-action="delete-deco">ลบ</button>
                </div>
            </div>
            <div class="item-body set-grid">
                <div class="form-group">
                    <label>ประเภท</label>
                    <input type="text" class="form-control form-control-sm" data-bind="deco.type" placeholder="เช่น วอลเปเปอร์">
                </div>
                <div class="form-group">
                    <label>กว้าง (ม.)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="deco.width_m" inputmode="numeric" placeholder="เมตร">
                </div>
                <div class="form-group">
                    <label>สูง (ม.)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="deco.height_m" inputmode="numeric" placeholder="เมตร">
                </div>
                <div class="form-group">
                    <label>ราคา (บ./ตร.หลา)</label>
                    <input type="number" class="form-control form-control-sm" data-bind="deco.price_sqyd" inputmode="numeric" placeholder="ราคา">
                </div>
            </div>
            <div class="summary-row deco-summary-row">
                <div class="summary-box full-width" data-deco-summary>
                    ราคา: <span class="price">0</span> บ. • พื้นที่: <span>0</span> ตร.หลา
                </div>
            </div>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>