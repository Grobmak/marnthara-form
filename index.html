<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Marnthara Input (v4)</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="header">
        <div class="menu-container">
            <button class="btn btn-icon" id="menuBtn"><span class="material-symbols-outlined">menu</span></button>
            <div class="menu-dropdown" id="menuDropdown">
                <button type="button" class="btn btn-block" id="importBtn"><span class="material-symbols-outlined">upload_file</span> Import(JSON)</button>
                <button type="button" class="btn btn-block" id="exportBtn"><span class="material-symbols-outlined">download_file</span> Export(JSON)</button>
                <a class="btn btn-block" href="https://docs.google.com/spreadsheets/d/1Bf83_R4cIKE2bQhiJtU8y_J9d3A-01qP/edit?usp=sharing&ouid=101859942702747346618&rtpof=true&sd=true" target="_blank"><span class="material-symbols-outlined">lab_panel</span> Pricing</a>
                <a class="btn btn-block" href="https://www.youtube.com/watch?v=F3n3P6D2_sY" target="_blank"><span class="material-symbols-outlined">play_circle</span> Tutorial</a>
            </div>
        </div>
        <div class="header-text">Marnthara Input <span class="version">v4</span></div>
    </div>
    <div class="main-container">
        <div class="sheet">
            <div class="control">
                <div class="control-head">
                    <input class="field text-center" id="room_name" type="text" placeholder="ชื่อลูกค้า / ชื่อห้อง" value="ห้องนอน 1" />
                </div>
                <div class="control-body">
                    <div class="option-group">
                        <div class="option-title">สินค้า</div>
                        <div class="row">
                            <label class="btn-radio"><input type="radio" name="product_type" value="fabric" checked /><span>ผ้าม่าน</span></label>
                            <label class="btn-radio"><input type="radio" name="product_type" value="sheer" /><span>ผ้าโปร่ง</span></label>
                            <label class="btn-radio"><input type="radio" name="product_type" value="wallpaper" /><span>วอลล์เปเปอร์</span></label>
                            <label class="btn-radio"><input type="radio" name="product_type" value="roller_blind" /><span>ม่านม้วน</span></label>
                        </div>
                    </div>
                    <div class="option-group" data-product-type="fabric">
                        <div class="row">
                            <div><label>ผ้า</label><select class="field" name="fabric_type" required></select></div>
                            <div><label>สไตล์</label><select class="field" name="curtain_style" required></select></div>
                        </div>
                        <div class="row two-col">
                            <div><label>ความสูงราง (ม.)</label><input class="field" name="rail_height_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>ราคาผ้า (บ.)</label><input class="field" name="fabric_price" type="text" inputmode="numeric" required /></div>
                        </div>
                        <div class="row two-col">
                            <div><label>ความกว้าง (ม.)</label><input class="field" name="width_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>จำนวนชุด</label><input class="field" name="sets" type="number" min="0" required /></div>
                        </div>
                        <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-curtain-summary>
                            ราคา: <span class="price">0</span> บ. • พื้นที่: <span class="price">0.00</span> ตร.ม. • ใช้ <span class="price">0</span> หลา
                        </div>
                    </div>
                    <div class="option-group" data-product-type="sheer">
                        <div class="row">
                            <div><label>ผ้า</label><select class="field" name="sheer_type" required></select></div>
                            <div><label>สไตล์</label><select class="field" name="curtain_style" required></select></div>
                        </div>
                        <div class="row two-col">
                            <div><label>ความสูงราง (ม.)</label><input class="field" name="rail_height_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>ราคาผ้า (บ.)</label><input class="field" name="sheer_price" type="text" inputmode="numeric" required /></div>
                        </div>
                        <div class="row two-col">
                            <div><label>ความกว้าง (ม.)</label><input class="field" name="width_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>จำนวนชุด</label><input class="field" name="sets" type="number" min="0" required /></div>
                        </div>
                        <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-curtain-summary>
                            ราคา: <span class="price">0</span> บ. • พื้นที่: <span class="price">0.00</span> ตร.ม. • ใช้ <span class="price">0</span> หลา
                        </div>
                    </div>
                    <div class="option-group" data-product-type="wallpaper">
                        <div class="row two-col">
                            <div><label>ความสูงห้อง (ม.)</label><input class="field" name="wallpaper_height_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>ราคาต่อม้วน</label><input class="field" name="wallpaper_price_roll" type="text" inputmode="numeric" required /></div>
                        </div>
                        <div class="walls-section">
                            <label>ความกว้างผนัง (ใส่ทีละด้าน)</label>
                            <div data-walls-container></div>
                            <button type="button" class="btn btn-xs btn-info outline" data-act="add-wall" style="margin-top: 8px;">+ เพิ่มผนัง</button>
                        </div>
                        <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-wallpaper-summary>
                            ราคา: <span class="price">0</span> บ. • พื้นที่: <span class="price">0.00</span> ตร.ม. • ใช้ <span class="price">0</span> ม้วน
                        </div>
                    </div>
                    <div class="option-group" data-product-type="roller_blind">
                        <div class="row two-col">
                            <div><label>ความกว้าง (ม.)</label><input class="field" name="roller_width_m" type="number" step="0.01" min="0" required /></div>
                            <div><label>ความสูง (ม.)</label><input class="field" name="roller_height_m" type="number" step="0.01" min="0" required /></div>
                        </div>
                        <div class="row two-col">
                            <div><label>ราคาต่อชุด</label><input class="field" name="roller_price_set" type="text" inputmode="numeric" required /></div>
                            <div><label>จำนวนชุด</label><input class="field" name="roller_sets" type="number" min="0" required /></div>
                        </div>
                        <div class="small" style="margin-top: 12px; border-top: 1px solid var(--line); padding-top: 8px;" data-roller-summary>
                            ราคา: <span class="price">0</span> บ. • พื้นที่: <span class="price">0.00</span> ตร.ม.
                        </div>
                    </div>
                    <div class="row" style="margin-top: 12px;">
                        <button type="button" class="btn btn-block btn-secondary" id="addItemBtn">เพิ่มรายการ</button>
                    </div>
                </div>
            </div>
            <div class="item-list" id="itemList">
                <div class="item-placeholder">
                    <span class="material-symbols-outlined icon">note_add</span>
                    <span>เพิ่มรายการแรกของคุณ</span>
                </div>
            </div>
            <div class="sheet-summary">
                <div class="row two-col summary-row">
                    <div>ราคารวม:</div>
                    <div class="price-value" id="totalPrice">0</div>
                </div>
            </div>
        </div>
    </div>
    <form id="payloadForm" method="POST" action="javascript:void(0);">
        <input type="hidden" name="payload" id="payloadInput" />
    </form>
    <div class="debug-panel" id="debug-panel">
        <label><input type="checkbox" id="dev-mode" /> Dev Mode</label>
        <button id="send-btn">Send</button>
        <button id="get-btn">Get</button>
    </div>

    <template id="itemTpl">
        <div class="item-card">
            <div class="item-header">
                <div class="item-room-name"></div>
                <div class="item-actions">
                    <button type="button" class="btn btn-icon btn-xs" data-act="copy-item"><span class="material-symbols-outlined">content_copy</span></button>
                    <button type="button" class="btn btn-icon btn-xs" data-act="edit-item"><span class="material-symbols-outlined">edit</span></button>
                    <button type="button" class="btn btn-icon btn-xs" data-act="delete-item"><span class="material-symbols-outlined">delete</span></button>
                </div>
            </div>
            <div class="item-content">
                <div class="item-detail"></div>
                <div class="item-summary">
                    <div class="item-price"></div>
                </div>
            </div>
        </div>
    </template>

    <template id="wallTpl">
        <div class="wall-input-row">
            <input class="field" name="wall_width_m" type="number" step="0.01" min="0" placeholder="ความกว้าง (ม.)" required />
            <button type="button" class="btn btn-icon btn-danger btn-xs outline" data-act="remove-wall"><span class="material-symbols-outlined">close</span></button>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>